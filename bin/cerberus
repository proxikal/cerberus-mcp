#!/usr/bin/env bash
# Cerberus global wrapper script
# This allows 'cerberus' to be called from any directory

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(dirname "$SCRIPT_DIR")"

# Set PYTHONPATH to include src directory
export PYTHONPATH="${PROJECT_ROOT}/src:${PYTHONPATH}"

# Use venv Python if available, otherwise system Python
if [ -f "${PROJECT_ROOT}/.venv/bin/python3" ]; then
    PYTHON="${PROJECT_ROOT}/.venv/bin/python3"
else
    PYTHON="python3"
fi

# Run cerberus.main with all arguments
exec "${PYTHON}" -m cerberus.main "$@"
