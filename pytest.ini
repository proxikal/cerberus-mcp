[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Exclude directories from collection
norecursedirs =
    .git
    .venv
    __pycache__
    test_data
    node_modules
    build
    dist
    *.egg-info
    manual

# Marker definitions
markers =
    fast: Fast unit tests (<1s each, no I/O, mocked deps)
    integration: Integration tests (real files, DB, network)
    benchmark: Performance benchmark tests (timing-sensitive)
    slow: Slow tests (>5s execution time)
    memory: Memory subsystem tests
    mutation: Mutation/editing tests
    blueprint: Blueprint feature tests
    phase1: Phase 1 tests (core indexing)
    phase2: Phase 2 tests (scanning)
    phase3: Phase 3 tests (retrieval)
    asyncio: Async IO tests

# Warnings configuration
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Minimum pytest version
minversion = 7.0

# Strict markers - fail on unknown markers
strict_markers = true

# Console output
console_output_style = count

# Default options for AI-friendly output
# -q: quiet mode (minimal output)
# --tb=short: short tracebacks on failure
# --no-header: skip pytest header
# -p no:cacheprovider: disable cache plugin (reduces disk writes)
addopts = -q --tb=short --no-header -p no:cacheprovider
